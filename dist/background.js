let n=null;chrome.action.onClicked.addListener(async e=>{if(e.id)try{await chrome.scripting.insertCSS({target:{tabId:e.id},files:["styles.css"]}),await chrome.scripting.executeScript({target:{tabId:e.id},files:["content/main.js"]}),chrome.notifications.create({type:"basic",iconUrl:"static/icon128.png",title:"FindFont Activated",message:"Select text on the page to identify fonts"})}catch(t){console.error("Failed to inject content script:",t)}});chrome.runtime.onMessage.addListener((e,t,o)=>{e.type==="FONT_DETECTED"&&(n=e.fontInfo,chrome.notifications.create({type:"basic",iconUrl:"icons/icon128.png",title:"Find Font",message:`Font: ${e.fontInfo.fontFamily}
Click to view details`},i=>{chrome.storage.local.set({[i]:e.fontInfo})}))});chrome.notifications.onClicked.addListener(e=>{chrome.storage.local.remove(e),chrome.action.openPopup()});chrome.notifications.onClosed.addListener(e=>{chrome.storage.local.remove(e)});chrome.runtime.onMessage.addListener((e,t,o)=>{e.type==="GET_FONT_INFO"&&o(n)});
